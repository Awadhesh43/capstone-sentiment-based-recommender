<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>EBUSS Product Recommender</title>

    <!-- Google Web Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap" rel="stylesheet"> 
    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <!-- Customized Bootstrap Stylesheet -->
    <link href="{{  url_for('static', path='/bootstrap.min.css') }}" rel="stylesheet">
    <!-- Template Stylesheet -->
    <link href="{{  url_for('static', path='/style.css') }}" rel="stylesheet">
  </head>

  <body>
      <div class="container topbar bg-primary d-lg-block">
          <div class="d-flex justify-content-between">
              <div class="top-info ps-2">
                  <h2> Ebuss Sentiment Based Product Recommendation App</h2>
              </div>
          </div>
      </div>

      <div class="container px-2">
          <nav class="navbar navbar-light bg-white">
              <a href="/" class="nav-item nav-link active">Home</a>
              <p><small><a href="/docs#/default/api_get_users_api_users_get">List Users API</a></small></p>
          </nav>
      </div>

      <div class="container">
          <p> Please enter the Username and click on Submit to view top 5 product recommendations</p>
          <div class="row">
              <form action="/app/ml_predict" method="get">                    
                <div class="position-relative mx-auto">
                  <input class="form-control border-2 border-secondary w-50 py-1 px-3 rounded-pill"
                      type="text" id="username" name="username"placeholder="Search by Username">
                  <button type="submit" class="btn btn-primary border-2 border-secondary py-0 px-4 position-absolute rounded-pill text-white h-100"
                      style="top: 0; right: 50%;">Submit</button>
                </div>
              </form>
          </div>
      </div>

      <div class="container">
          <div class="row">
              {% if recommendations %}
                <p> Top 5 product recommendations for user [{{ user_input }}]</p>
                <table class="table d-print-table table-striped table-hover">
                  <thead>
                    <tr>
                      {% for column in column_names %}
                        <td style="color: darkseagreen;">{{ column| upper }}</td>
                      {% endfor%}
                    </tr>
                  </thead>
                  <tbody>
                    {% for row in recommendations %}
                      <tr>
                        {% for col, row_val in zip(column_names, row) %}
                          <td>{{row_val}}</td>
                        {% endfor %}
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% endif %}
            </div>

            <div class="row">
              {% if err_msg %}
              <div class="alert alert-danger" role="alert">{{ err_msg }}</div>
              {% endif %}
            </div>
      </div>
  </body>

  <footer class="bg-primary text-center fixed-bottom">
    <div class="text-center p-1 bg-primary">Created by KAR, 2024</div>
  </footer>

</html>